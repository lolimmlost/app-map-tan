# Routing Documentation

The application uses TanStack Router for client-side routing with file-based route generation. Routes are organized by functionality and follow a consistent structure.

## Overview

Routing is configured in `src/router.tsx` and uses automatically generated route definitions from `src/routeTree.gen.ts`. The route structure follows a file-based convention where files in the `src/routes/` directory map to application routes.

## Route Structure

```
src/routes/
├── __root.tsx          # Root layout, wraps all routes
├── index.tsx           # Home page (/)
├── (auth)/             # Auth group
│   ├── login.tsx       # Login page (/login)
│   ├── route.tsx       # Auth group layout
│   └── signup.tsx      # Signup page (/signup)
├── api/                # API routes
│   ├── apps/
│   │   └── $.ts        # App API endpoints
│   └── auth/
│       └── $.ts        # Auth API endpoints
├── dashboard/          # Dashboard group
│   ├── index.tsx       # Dashboard page (/dashboard)
│   └── route.tsx       # Dashboard group layout
```

## Route Files

### Root Route (`src/routes/__root.tsx`)

The root route provides the overall application layout and context providers.

Features:
- Authentication context using `beforeLoad`
- Theme provider wrapper
- Global components (Toaster)
- Devtools integration
- Meta tags and document head management

Context:
- `queryClient`: TanStack Query client
- `user`: Current user authentication state

### Index Route (`src/routes/index.tsx`)

The home page route (`/`) is publicly accessible and serves as the entry point.

Features:
- Conditional rendering based on authentication state
- Login/signup links for unauthenticated users
- Dashboard link for authenticated users
- User session display
- Sign out functionality

### Auth Routes

#### Login Route (`src/routes/(auth)/login.tsx`)

The login page route (`/login`) handles user authentication.

Features:
- Email/password form
- Social authentication options
- Error handling
- Redirect after successful login

Context:
- `redirectUrl`: URL to redirect to after login

#### Signup Route (`src/routes/(auth)/signup.tsx`)

The signup page route (`/signup`) handles new user registration.

Features:
- Name, email, password form
- Password confirmation
- Social signup options
- Error handling
- Redirect after successful signup

Context:
- `redirectUrl`: URL to redirect to after signup

#### Auth Group Route (`src/routes/(auth)/route.tsx`)

The auth group layout route provides a consistent layout for authentication pages.

Features:
- Responsive layout container
- Context provider for redirect URL
- Shared styling

### Dashboard Routes

#### Dashboard Index Route (`src/routes/dashboard/index.tsx`)

The dashboard page route (`/dashboard`) requires authentication and displays the main application interface.

Features:
- Application grid display
- Create/edit/delete functionality
- Loading and error states
- Form management

#### Dashboard Group Route (`src/routes/dashboard/route.tsx`)

The dashboard group layout route provides layout for dashboard pages.

Features:
- Header with navigation
- Sign out functionality
- User context display

### API Routes

#### Apps API Route (`src/routes/api/apps/$.ts`)

Handles application-related API requests.

Endpoints:
- GET /api/apps - List all apps for current user
- POST /api/apps - Create new app
- PUT /api/apps/:id - Update existing app
- DELETE /api/apps/:id - Delete app

#### Auth API Route (`src/routes/api/auth/$.ts`)

Handles authentication-related API requests.

Endpoints:
- Various Better Auth endpoints managed by the library

## Route Generation

Routes are automatically generated by TanStack Router using the file structure. The route tree is generated at `src/routeTree.gen.ts` and should not be manually edited.

## Route Protection

Routes are protected using different mechanisms:

1. **Public Routes**: Accessible without authentication (e.g., home page, login, signup)
2. **Protected Routes**: Require authentication (e.g., dashboard)
3. **API Routes**: Protected by server-side middleware

## Navigation

Navigation between routes is handled using TanStack Router's `Link` component and `useNavigate` hook.

Examples:
- `<Link to="/dashboard">Dashboard</Link>`
- `const navigate = useNavigate(); navigate({ to: "/dashboard" });`

## Route Parameters

Some routes use parameters:

- Dynamic segments (e.g., `/apps/$appId`)
- Search parameters (e.g., `/apps?filter=active`)
- Hash parameters (e.g., `/apps#section1`)

## Route Context

Routes can provide context to child routes using the `context` property:

```typescript
beforeLoad: async ({ context }) => {
  // Access parent context and provide new context
  return { additionalData };
}
```

## Route Metadata

Routes can define metadata such as:

- Page titles
- Meta descriptions
- Link tags
- Script tags

This is done through the `head` property in route configuration.

## Best Practices

1. **File Naming**: Use descriptive names that match the route path
2. **Route Grouping**: Group related routes in directories
3. **Context Management**: Use route context for sharing data between parent and child routes
4. **Error Handling**: Implement proper error boundaries for routes
5. **Loading States**: Provide loading indicators for data-fetching routes